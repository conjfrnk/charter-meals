{% extends "layout.html" %}
{% block content %}
<h2>Content Management</h2>

<div class="admin-instructions">
  <h3>ğŸ“ Content Management</h3>
  <p>Edit the content that appears on the main meal signup page. Each section below represents a different part of the website that you can customize.</p>
  
  <h4>ğŸ“‹ Content Guidelines:</h4>
  <ul>
    <li><strong>Line Breaks:</strong> Each line you type will become a separate line on the website</li>
    <li><strong>Links:</strong> Use markdown format: <code>[Link Text](https://example.com)</code></li>
    <li><strong>Bold Text:</strong> Use <code>**bold text**</code> for emphasis</li>
    <li><strong>Italic Text:</strong> Use <code>*italic text*</code> for subtle emphasis</li>
  </ul>
</div>

  <form method="POST" action="{{ url_for('admin_content') }}" class="content-management-form">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    
    <!-- Welcome Header -->
    <div class="content-section">
      <h4>ğŸ  Welcome Header</h4>
      <p class="content-description">The main title that appears at the top of the meal signup page</p>
      <textarea name="content_value_welcome_header" rows="2" placeholder="Enter the main header text">{{ content_items.get('welcome_header', 'Welcome to Charter!!') }}</textarea>
    </div>

    <!-- Welcome Message -->
    <div class="content-section">
      <h4>ğŸ’¬ Welcome Message</h4>
      <p class="content-description">The subtitle or description below the header</p>
      <textarea name="content_value_welcome_message" rows="3" placeholder="Enter the welcome message">{{ content_items.get('welcome_message', 'We can\'t wait to see you at Charter meals!') }}</textarea>
    </div>

    <!-- Contact Info -->
    <div class="content-section">
      <h4>ğŸ“ Contact Information</h4>
      <p class="content-description">Information about who to contact for questions</p>
      <textarea name="content_value_contact_info" rows="3" placeholder="Enter contact information">{{ content_items.get('contact_info', 'Contact our kitchen managers, Tiffany and Hector, if you have any questions.') }}</textarea>
    </div>

    <!-- Meal Rules Title -->
    <div class="content-section">
      <h4>ğŸ“‹ Meal Rules Title</h4>
      <p class="content-description">The title for the meal rules section</p>
      <textarea name="content_value_meal_rules_title" rows="2" placeholder="Enter the rules section title">{{ content_items.get('meal_rules_title', 'Rules for Meal Sign-Up') }}</textarea>
    </div>

    <!-- Meal Rules -->
    <div class="content-section">
      <h4>ğŸ“œ Meal Rules</h4>
      <p class="content-description">The rules for meal signups. Each rule will become a separate bullet point on the website.</p>
      <div id="meal-rules-list">
        {% for rule in content_items['meal_rules_list'] %}
          <div class="meal-rule-item">
            <input type="text" name="content_value_meal_rules_list[]" value="{{ rule }}" placeholder="Enter a meal rule" style="width: 80%; display: inline-block;" />
            <button type="button" class="remove-rule" onclick="removeRule(this)">Remove</button>
          </div>
        {% endfor %}
        {% if not content_items['meal_rules_list'] %}
          <div class="meal-rule-item">
            <input type="text" name="content_value_meal_rules_list[]" placeholder="Enter a meal rule" style="width: 80%; display: inline-block;" />
            <button type="button" class="remove-rule" onclick="removeRule(this)">Remove</button>
          </div>
        {% endif %}
      </div>
      <button type="button" id="add-rule" onclick="addRule()">Add Rule</button>
    </div>

    <script>
      function addRule() {
        const container = document.getElementById('meal-rules-list');
        const div = document.createElement('div');
        div.className = 'meal-rule-item';
        div.innerHTML = `<input type="text" name="content_value_meal_rules_list[]" placeholder="Enter a meal rule" style="width: 80%; display: inline-block;" /> <button type="button" class="remove-rule" onclick="removeRule(this)">Remove</button>`;
        container.appendChild(div);
      }
      function removeRule(btn) {
        const div = btn.parentNode;
        div.parentNode.removeChild(div);
      }
    </script>

    <!-- Feedback Link -->
    <div class="content-section">
      <h4>ğŸ”— Feedback Form URL</h4>
      <p class="content-description">The URL for the feedback form</p>
      <textarea name="content_value_feedback_link" rows="2" placeholder="Enter the feedback form URL">{{ content_items.get('feedback_link', 'https://forms.gle/PawcrnA9y9CtAgDM9') }}</textarea>
    </div>

    <!-- Feedback Text -->
    <div class="content-section">
      <h4>ğŸ’­ Feedback Text</h4>
      <p class="content-description">The text that appears with the feedback link</p>
      <textarea name="content_value_feedback_text" rows="3" placeholder="Enter feedback text">{{ content_items.get('feedback_text', 'If you have any feedback on this website, please fill out this form. Thanks! -Connor') }}</textarea>
    </div>

  <div class="form-actions">
    <button type="submit" class="save-button">ğŸ’¾ Save All Content</button>
  </div>
</form>

<div class="admin-instructions">
  <h4>ğŸ’¡ Markdown Formatting Tips:</h4>
  <ul>
    <li><code>[Link Text](https://example.com)</code> - Creates a clickable link</li>
    <li><code>**Bold Text**</code> - Makes text bold</li>
    <li><code>*Italic Text*</code> - Makes text italic</li>
    <li>Just press Enter for new lines - no need for \n</li>
  </ul>
  
  <h4>ğŸ“± Preview:</h4>
  <p>After saving, you can visit the main page to see how your changes look!</p>
</div>

<p><a href="{{ url_for('admin') }}">â† Back to Admin Dashboard</a></p>
{% endblock %} 